<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro de Impressoras</title>
  <script type="module">
    // Importa o Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js";

    // Configuração do Firebase (substitua pelos seus dados)
    const firebaseConfig = {
      apiKey: "AIzaSyBWMeGoDass7ZZKbsN7ogX7ZKxTTApprtg",
      authDomain: "inventario-impressoras-2ecbd.firebaseapp.com",
      projectId: "inventario-impressoras-2ecbd",
      storageBucket: "inventario-impressoras-2ecbd.appspot.com",
      messagingSenderId: "993025022167",
      appId: "1:993025022167:web:94c62eac0cfa96ddc1f892",
      measurementId: "G-459GNX2RGH"
    };

    // Inicializa Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Função para adicionar impressora
    async function adicionarImpressora() {
      const nome = document.getElementById("nome").value;
      const modelo = document.getElementById("modelo").value;

      if (!nome || !modelo) {
        alert("Preencha todos os campos!");
        return;
      }

      await addDoc(collection(db, "impressoras"), {
        nome: nome,
        modelo: modelo,
        dataCadastro: new Date()
      });

      document.getElementById("nome").value = "";
      document.getElementById("modelo").value = "";
      listarImpressoras();
    }

    // Função para listar impressoras
    async function listarImpressoras() {
      const lista = document.getElementById("lista");
      lista.innerHTML = ""; // limpa a lista

      const querySnapshot = await getDocs(collection(db, "impressoras"));
      querySnapshot.forEach((docSnap) => {
        const data = docSnap.data();
        const li = document.createElement("li");
        li.textContent = `${data.nome} - ${data.modelo} (${data.dataCadastro.toDate().toLocaleString()})`;

        // Botão excluir
        const btnExcluir = document.createElement("button");
        btnExcluir.textContent = "Excluir";
        btnExcluir.style.marginLeft = "10px";
        btnExcluir.onclick = async () => {
          await deleteDoc(doc(db, "impressoras", docSnap.id));
          listarImpressoras();
        };

        li.appendChild(btnExcluir);
        lista.appendChild(li);
      });
    }

    // Chama a listagem ao carregar a página
    window.onload = listarImpressoras;
    window.adicionarImpressora = adicionarImpressora;
  </script>
</head>
<body>
  <h1>Cadastro de Impressoras</h1>

  <label>Nome da Impressora: </label>
  <input type="text" id="nome" />
  <br><br>
  <label>Modelo: </label>
  <input type="text" id="modelo" />
  <br><br>
  <button onclick="adicionarImpressora()">Cadastrar Impressora</button>

  <h2>Lista de Impressoras</h2>
  <ul id="lista"></ul>
</body>
</html>
